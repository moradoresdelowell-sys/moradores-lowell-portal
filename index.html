<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moradores de Lowell - Portal Digital</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css ">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js "></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js "></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js "></script>
    
    <!-- Config Firebase -->
    <script src="firebase-config.js"></script>
<base target="_blank">
</head>
<body>
    <!-- Header com Hamburguer -->
    <header class="header">
        <div class="container">
            <div class="nav-container">
                <!-- Logo e Nome -->
                <div class="logo">
                    <img src="logo-moradores.png" alt="Logo" class="logo-img">
                    <div class="logo-text">
                        <h1>Moradores de Lowell</h1>
                        <p>Portal Digital</p>
                    </div>
                </div>
                
                <!-- Menu Hamburguer -->
                <div class="hamburguer" id="hamburguer">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Menu Lateral -->
    <nav class="nav-menu-hamburguer" id="navMenu">
        <ul class="nav-list-hamburguer">
            <li><a href="#home" class="nav-link">Início</a></li>
            <li><a href="#classificados" class="nav-link">Classificados</a></li>
            <li><a href="#aluguel" class="nav-link">Aluguel</a></li>
            <li><a href="#empregos" class="nav-link">Empregos</a></li>
            <li><a href="#guia" class="nav-link">Guia Comercial</a></li>
            <li><a href="#noticias" class="nav-link">Notícias</a></li>
        </ul>
    </nav>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- INICIO - COM DESTAQUES PREMIUM -->
        <section id="home" class="content-section active">
            <div class="container">
                <h2>Início</h2>
                <p>Tudo para a comunidade brasileira de Lowell</p>
            </div>
            
            <!-- DESTAQUES PREMIUM -->
            <div class="premium-destaques">
                <div class="container">
                    <h2 class="premium-title">Estabelecimentos Destaque</h2>
                    <p class="premium-subtitle">Conheça nossos comércios premium</p>
                    
                    <div class="premium-grid">
                        <!-- Comércio 1 -->
                        <div class="premium-card">
                            <div class="premium-image">
                                <img src="https://via.placeholder.com/300x200?text=Com ércio+1" alt="Estabelecimento 1">
                                <div class="premium-badge">
                                    <i class="fas fa-star"></i>
                                    <span>PREMIUM</span>
                                </div>
                            </div>
                            <div class="premium-content">
                                <h3>Nome do Estabelecimento</h3>
                                <p class="premium-desc">Breve descrição do estabelecimento e seus serviços.</p>
                                <div class="premium-info">
                                    <span><i class="fas fa-map-marker-alt"></i> Endereço</span>
                                    <span><i class="fas fa-phone"></i> (978) 555-0001</span>
                                </div>
                                <button class="premium-btn">Ver Detalhes</button>
                            </div>
                        </div>

                        <!-- Comércio 2 -->
                        <div class="premium-card">
                            <div class="premium-image">
                                <img src="https://via.placeholder.com/300x200?text=Com ércio+2" alt="Estabelecimento 2">
                                <div class="premium-badge">
                                    <i class="fas fa-star"></i>
                                    <span>PREMIUM</span>
                                </div>
                            </div>
                            <div class="premium-content">
                                <h3>Nome do Estabelecimento</h3>
                                <p class="premium-desc">Breve descrição do estabelecimento e seus serviços.</p>
                                <div class="premium-info">
                                    <span><i class="fas fa-map-marker-alt"></i> Endereço</span>
                                    <span><i class="fas fa-phone"></i> (978) 555-0002</span>
                                </div>
                                <button class="premium-btn">Ver Detalhes</button>
                            </div>
                        </div>

                        <!-- Comércio 3 -->
                        <div class="premium-card">
                            <div class="premium-image">
                                <img src="https://via.placeholder.com/300x200?text=Com ércio+3" alt="Estabelecimento 3">
                                <div class="premium-badge">
                                    <i class="fas fa-star"></i>
                                    <span>PREMIUM</span>
                                </div>
                            </div>
                            <div class="premium-content">
                                <h3>Nome do Estabelecimento</h3>
                                <p class="premium-desc">Breve descrição do estabelecimento e seus serviços.</p>
                                <div class="premium-info">
                                    <span><i class="fas fa-map-marker-alt"></i> Endereço</span>
                                    <span><i class="fas fa-phone"></i> (978) 555-0003</span>
                                </div>
                                <button class="premium-btn">Ver Detalhes</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÚLTIMAS NOTÍCIAS - ADICIONADO AQUI -->
            <div class="ultimas-noticias">
                <div class="container">
                    <div class="noticias-header">
                        <h2 class="noticias-title">Últimas Notícias</h2>
                        <a href="#noticias" class="ver-todas-noticias">Ver todas <i class="fas fa-arrow-right"></i></a>
                    </div>
                    <div class="noticias-grid-home" id="noticiasGridHome">
                        <div class="loading-message">
                            <i class="fas fa-spinner fa-spin"></i> Carregando notícias...
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CLASSIFICADOS - PRODUTOS E DOAÇÕES -->
        <section id="classificados" class="content-section">
            <div class="container">
                <h2>Classificados</h2>
                <p>Produtos e doações para nossa comunidade</p>
                <div class="section-filters">
                    <button class="filter-btn active" data-filter="todos">Todos</button>
                    <button class="filter-btn" data-filter="produtos">Produtos</button>
                    <button class="filter-btn" data-filter="doacoes">Doações</button>
                </div>
                <div class="anuncios-grid" id="anunciosGrid">
                    <!-- Anúncios do Firebase vão aqui -->
                    <div class="loading-message">Carregando classificados...</div>
                </div>
            </div>
        </section>

        <!-- ALUGUEL - QUARTO, CASA E APARTAMENTOS -->
        <section id="aluguel" class="content-section">
            <div class="container">
                <h2>Aluguel</h2>
                <p>Quartos, casas e apartamentos na região</p>
                <div class="aluguel-grid" id="aluguelGrid">
                    <!-- Imóveis do Firebase vão aqui -->
                    <div class="loading-message">Carregando imóveis...</div>
                </div>
            </div>
        </section>

        <!-- EMPREGOS - SOMENTE WHATSAPP -->
        <section id="empregos" class="content-section">
            <div class="container">
                <h2>Empregos</h2>
                <p>Oportunidades de trabalho na região</p>
                <div class="vagas-list" id="vagasList">
                    <!-- Vagas do Firebase vão aqui -->
                    <div class="loading-message">Carregando vagas...</div>
                </div>
            </div>
        </section>

        <!-- GUIA COMERCIAL - PREMIUM/DESTAQUE/GRÁTIS -->
        <section id="guia" class="content-section">
            <div class="container">
                <h2>Guia Comercial</h2>
                <p>Estabelecimentos da nossa comunidade</p>
                <div class="estabelecimentos-list" id="estabelecimentosList">
                    <!-- Estabelecimentos do Firebase vão aqui -->
                    <div class="loading-message">Carregando estabelecimentos...</div>
                </div>
            </div>
        </section>

        <!-- NOTÍCIAS -->
        <section id="noticias" class="content-section">
            <div class="container">
                <h2>Notícias</h2>
                <p>Fique informado sobre nossa comunidade</p>
                <div class="noticias-grid" id="noticiasGrid">
                    <!-- Notícias do Firebase vão aqui -->
                    <div class="loading-message">Carregando notícias...</div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer com Rádio -->
    <footer class="footer">
        <div class="container">
            <!-- Player de Rádio -->
            <div class="radio-player-footer">
                <div class="radio-info">
                    <i class="fas fa-radio"></i>
                    <span>MDL Radio</span>
                </div>
                <div class="radio-controls-footer">
                    <audio id="radioAudio" autoplay>
                        <source src="https://stream.radio.com:8000/radio.mp3 " type="audio/mpeg">
                        Seu navegador não suporta o player de áudio.
                    </audio>
                    <button class="play-btn-footer" id="playBtn">
                        <i class="fas fa-pause"></i>
                    </button>
                    <div class="volume-control">
                        <i class="fas fa-volume-down"></i>
                        <input type="range" id="volumeSlider" min="0" max="100" value="50">
                        <i class="fas fa-volume-up"></i>
                    </div>
                </div>
            </div>
            
            <!-- Copyright -->
            <div class="footer-bottom">
                <p>&copy; 2024 Moradores de Lowell</p>
            </div>
        </div>
    </footer>

    <!-- LINK PRO ADMIN -->
    <a href="admin-login.html" target="_blank" style="position: fixed; bottom: 20px; right: 20px; background: #dc143c; color: white; padding: 1rem; border-radius: 50px; text-decoration: none; z-index: 9999; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">
        <i class="fas fa-plus"></i> Admin
    </a>

    <!-- Scripts -->
    <script src="script.js"></script>
    
    <!-- CSS PARA AS NOTÍCIAS NA HOME -->
    <style>
        /* Seção Últimas Notícias na Home */
        .ultimas-noticias {
            background-color: #f8f9fa;
            padding: 60px 0;
            margin-top: 60px;
        }

        .noticias-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .noticias-title {
            font-size: 2.5rem;
            color: #333;
            font-weight: 700;
        }

        .ver-todas-noticias {
            color: #dc143c;
            text-decoration: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: color 0.3s;
        }

        .ver-todas-noticias:hover {
            color: #b71c1c;
        }

        .noticias-grid-home {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .noticia-card-home {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .noticia-card-home:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .noticia-imagem-home {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 4px solid #dc143c;
        }

        .noticia-conteudo-home {
            padding: 25px;
        }

        .noticia-categoria-home {
            display: inline-block;
            background-color: #dc143c;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 15px;
        }

        .noticia-titulo-home {
            font-size: 1.4rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .noticia-resumo-home {
            color: #666;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .noticia-meta-home {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: #999;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .noticias-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .noticias-title {
                font-size: 2rem;
            }
            
            .noticias-grid-home {
                grid-template-columns: 1fr;
            }
        }
    </style>

    <!-- CARREGA ANÚNCIOS E NOTÍCIAS -->
    <script>
    // Debug primeiro
    console.log('Firebase carregado?', typeof firebase !== 'undefined');
    console.log('Firestore carregado?', typeof db !== 'undefined');
    
    // Carrega anúncios do Firebase
    async function carregarAnuncios() {
        try {
            console.log('Iniciando carregamento de anúncios...');
            
            const anunciosSnapshot = await db.collection('anuncios')
                .where('ativo', '==', true)
                .orderBy('dataCadastro', 'desc')
                .limit(10)
                .get();
            
            console.log('Anúncios encontrados:', anunciosSnapshot.size);
            
            let anunciosHTML = '';
            
            if (anunciosSnapshot.empty) {
                anunciosHTML = '<p class="sem-anuncios">Nenhum anúncio cadastrado ainda.</p>';
            } else {
                anunciosSnapshot.forEach((doc) => {
                    const anuncio = doc.data();
                    anunciosHTML += `
                        <div class="anuncio-card" data-categoria="${anuncio.categoria}">
                            <h3>${anuncio.titulo}</h3>
                            <p class="categoria"><span class="cat-badge">${anuncio.categoria}</span></p>
                            <p class="descricao">${anuncio.descricao}</p>
                            <p class="preco"><strong>${anuncio.preco}</strong></p>
                            <p class="contato"><i class="fas fa-phone"></i> ${anuncio.contato}</p>
                            <p class="data"><small>${anuncio.dataExibicao}</small></p>
                        </div>
                    `;
                });
            }
            
            document.getElementById('anunciosGrid').innerHTML = anunciosHTML;
            console.log('Anúncios carregados com sucesso!');
            
        } catch (error) {
            console.error('Erro ao carregar anúncios:', error);
            document.getElementById('anunciosGrid').innerHTML = '<p class="erro-carregar">Erro ao carregar anúncios.</p>';
        }
    }

    // Carrega notícias para a home (abaixo dos destaques)
    async function carregarNoticiasHome() {
        try {
            console.log('Iniciando carregamento de notícias para home...');
            
            const noticiasSnapshot = await db.collection('noticias')
                .where('ativo', '==', true)
                .orderBy('data', 'desc')
                .limit(6) // Limitar às 6 últimas notícias para home
                .get();
            
            console.log('Notícias encontradas para home:', noticiasSnapshot.size);
            
            let noticiasHTML = '';
            
            if (noticiasSnapshot.empty) {
                noticiasHTML = '<p class="sem-noticias">Nenhuma notícia publicada ainda.</p>';
            } else {
                noticiasSnapshot.forEach((doc) => {
                    const noticia = doc.data();
                    const data = noticia.data ? new Date(noticia.data.seconds * 1000).toLocaleDateString('pt-BR') : 'Data não disponível';
                    
                    noticiasHTML += `
                        <div class="noticia-card-home" onclick="window.location.href='noticia.html?id=${doc.id}'">
                            ${noticia.imagem ? `<img src="${noticia.imagem}" alt="${noticia.titulo}" class="noticia-imagem-home">` : ''}
                            <div class="noticia-conteudo-home">
                                ${noticia.categoria ? `<span class="noticia-categoria-home">${noticia.categoria}</span>` : ''}
                                <h3 class="noticia-titulo-home">${noticia.titulo || 'Título não disponível'}</h3>
                                <p class="noticia-resumo-home">${noticia.resumo || noticia.conteudo?.substring(0, 150) + '...' || 'Conteúdo não disponível'}</p>
                                <div class="noticia-meta-home">
                                    <span class="noticia-data-home">
                                        <i class="fas fa-calendar"></i>
                                        ${data}
                                    </span>
                                    ${noticia.autor ? `
                                    <span class="noticia-autor-home">
                                        <i class="fas fa-user"></i>
                                        ${noticia.autor}
                                    </span>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            document.getElementById('noticiasGridHome').innerHTML = noticiasHTML;
            console.log('Notícias da home carregadas com sucesso!');
            
        } catch (error) {
            console.error('Erro ao carregar notícias da home:', error);
            document.getElementById('noticiasGridHome').innerHTML = '<p class="erro-carregar">Erro ao carregar notícias.</p>';
        }
    }

    // Quando clicar em "Classificados"
    document.querySelector('a[href="#classificados"]').addEventListener('click', function() {
        console.log('Clicou em classificados');
        setTimeout(carregarAnuncios, 300);
    });

    // Carregar notícias automaticamente quando a página carregar
    document.addEventListener('DOMContentLoaded', function() {
        carregarNoticiasHome();
    });
    </script>
</body>
</html>